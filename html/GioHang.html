<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ Hàng</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/all.min.css">
    <link rel="stylesheet" href="../css/template.css">
    <script src="../js/bootstrap.bundle.min.js"></script>
    <style>
        .cart-item {
            border-bottom: 1px solid #dee2e6;
            padding: 20px 0;
        }

        .btn-outline-danger {
            border-color: #dc3545;
            color: #dc3545;
        }

        .btn-outline-danger:hover {
            background-color: #dc3545;
            color: white;
        }

        .total-section {
            padding: 20px;
            border-radius: 5px;
        }
    </style>
</head>

<body style="background-color: #183c5c;">
    <div class="container-fluid px-xl-5">
        <!-- Header -->
        <header class="mb-xl-5">
            <nav class="navbar navbar-expand-xl navbar-dark fixed-top px-xl-5" style="background-color: #183c55;">
                <div class="container-fluid">
                    <a class="navbar-brand" href="../html/TrangChu.html">Sporty</a>
                    <button class="navbar-toggler d-xl-none" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="collapsibleNavId">
                        <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="../html/TrangChu.html" aria-current="page">Trang
                                    chủ</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="dropdownSP" data-bs-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    Sản phẩm
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="dropdownSP">
                                    <li><a class="dropdown-item" href="../html/SanPham/SanPham_DoBoi.html">Đồ bơi</a></li>
                                    <li><a class="dropdown-item" href="../html/SanPham/SanPham_PhuKienBoi.html">Phụ kiện bơi</a></li>
                                    <li><a class="dropdown-item" href="../html/SanPham/SanPham_GiamGia.html">Hàng giảm giá</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../html/GioiThieu.html" aria-current="page">Giới thiệu</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../html/LienHe.html" aria-current="page">Liên hệ</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../html/DangNhap.html"> <i class="fas fa-user me-1"></i> Đăng
                                    nhập</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="../html/GioHang.html"> <i class="fas fa-shopping-cart me-1"></i> Giỏ
                                    hàng</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Body -->
        <div class="pt-5 text-white">
            <div class="container mt-5 pt-5">
                <h2 class="mb-4">Giỏ hàng của bạn</h2>

                <!-- Cart Item -->
                <div class="cartContainer">
                    <div class="cart-item">
                        <div class="row align-items-center">
                            <div class="col-5 d-flex align-items-center">
                                <img src="../imgs/imgs_SanPham/doboinam1.jpg" alt="" class="w-25"
                                    style="border-radius: 5px; height: 100px;">
                                <div class="text-start ms-5">
                                    <h5>Quần bơi nam Sporty Pro Xanh Xám</h5>
                                </div>
                            </div>
                            <div class="col-4 d-flex align-items-center justify-content-end  ">
                                <input type="number" class="form-control mb-1" value="1" min="1" style="width: 150px; padding-left: 15%;">
                                <div class="text-start ms-5">
                                    <h5>450.000₫</h5>
                                </div>
                            </div>
                            <div class="col-3 d-flex justify-content-end align-items-center">
                                <h5 class="me-5">450.000₫</h5>
                                <button class="btn btn-outline-danger">Xóa</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Total Section -->
                <div class="row mt-4">
                    <div class="col-6 offset-md-6">
                        <div class="total-section ">
                            <h4 class="mb-3 text-end">Tổng hóa đơn: 450.000₫</h4>
                            <div class="text-end">
                                <button class="btn btn-danger" style="width: 150px;">Thanh toán</button><br>
                                <button class="btn btn-outline-danger mt-2" style="width: 150px;">Xóa tất cả</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="mt-5">
            <div class="row py-5 mx-auto text-light" style="background-color: #e74c3c;">
                <div class="col-4 mx-auto">
                    <h4 class=" fw-normal text-nowrap">Đăng ký ngay để được giảm 200k đơn tiếp theo</h4>
                    <form>
                        <input class="form-control mt-3 text-light ps-3" type="text" name="Email" id="Email"
                            style="border-radius: 0; border: 4px solid #e08898; background-color: #e74c3c;"
                            placeholder="Nhập email của bạn ở đây">
                        <button class="btn w-100 btn-light mt-3" type="submit"
                            style="border-radius: 0 12px 0 0; color: #e74c3c;">Đăng
                            ký
                            ngay</button>
                    </form>
                </div>
            </div>
            <div class="row py-5 mx-auto px-xl-5 text-nowrap" style="background-color: #101c2c;">
                <div class="col-2 mx-auto">
                    <h4 class="pb-2 fw-normal" style="color: #e74c3c;">Mua sắm</h4>
                    <a class="link-secondary d-block text-decoration-none" href="../html/SanPham.html">Nữ</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/SanPham.html">Nam</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/SanPham.html">Phụ kiện</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/SanPham.html">Giảm giá</a>
                </div>
                <div class="col-2 mx-auto">
                    <h4 class="pb-2 fw-normal" style="color: #e74c3c;">Thông tin</h4>
                    <a class="link-secondary d-block text-decoration-none" href="../html/HoiDap.html">Hỏi đáp</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/GiaoTra.html">Giao hàng & Trả
                        hàng</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/ChinhSach.html">Chính sách cửa
                        hàng </a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/ThanhToan.html">Phương thức
                        thanh toán</a>
                </div>
                <div class="col-2 mx-auto">
                    <h4 class="pb-2 fw-normal" style="color: #e74c3c;">Khám phá</h4>
                    <a class="link-secondary d-block text-decoration-none" href="../html/GioiThieu.html">Giới thiệu</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/LienHe.html">Liên hệ</a>
                    <a class="link-secondary d-block text-decoration-none" href="../html/LienHe.html">Đại lý</a>
                </div>
                <div class="col-2 mx-auto">
                    <h4 class="pb-2 fw-normal" style="color: #e74c3c;">Dịch vụ khách hàng</h4>
                    <a class="link-secondary d-block text-decoration-none" href="tel:0999-123-456">Điện thoại: 0999 123
                        456</a>
                    <a class="link-secondary d-block text-decoration-none" href="mailto:buiquoctru@gmail.com">Email:
                        buiquoctru@gmail.com</a>
                </div>
            </div>
        </footer>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Hiển thị giỏ hàng khi trang được tải
        displayCartItems();
        
        // Sự kiện xóa sản phẩm
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn-outline-danger') && e.target.textContent === 'Xóa') {
                const productId = e.target.getAttribute('data-id');
                removeFromCart(productId);
            }
        });

        // Sự kiện xóa tất cả
        document.querySelector('.btn-outline-danger[style="width: 150px;"]').addEventListener('click', clearCart);

        // Sự kiện thay đổi số lượng
        document.addEventListener('change', function(e) {
            if (e.target.tagName === 'INPUT' && e.target.type === 'number' && e.target.closest('.cart-item')) {
                const productId = e.target.closest('.cart-item').getAttribute('data-id');
                const newQuantity = parseInt(e.target.value);
                updateQuantity(productId, newQuantity);
            }
        });

        // Hàm hiển thị giỏ hàng
        function displayCartItems() {
            const cartContainer = document.querySelector('.cartContainer');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            if (cart.length === 0) {
                cartContainer.innerHTML = '<p class="text-white">Giỏ hàng của bạn đang trống</p>';
                updateTotal();
                return;
            }

            let html = '';
            cart.forEach(item => {
                // Chỉ hiển thị giá đã giảm (price), không hiển thị originalPrice
                html += `
                    <div class="cart-item" data-id="${item.id}">
                        <div class="row align-items-center">
                            <div class="col-5 d-flex align-items-center">
                                <img src="${item.image}" alt="${item.name}" class="w-25" style="border-radius: 5px; height: 100px;">
                                <div class="text-start ms-5">
                                    <h5>${item.name}</h5>
                                </div>
                            </div>
                            <div class="col-4 d-flex align-items-center justify-content-end">
                                <input type="number" class="form-control mb-1" value="${item.quantity}" min="1" style="width: 150px; padding-left: 15%;">
                                <div class="text-start ms-5">
                                    <h5>${item.price.toLocaleString('vi-VN')}₫</h5>
                                </div>
                            </div>
                            <div class="col-3 d-flex justify-content-end align-items-center">
                                <h5 class="me-5">${(item.price * item.quantity).toLocaleString('vi-VN')}₫</h5>
                                <button class="btn btn-outline-danger" data-id="${item.id}">Xóa</button>
                            </div>
                        </div>
                    </div>
                `;
            });

            cartContainer.innerHTML = html;
            updateTotal();
        }

        // Hàm xóa sản phẩm
        function removeFromCart(productId) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            displayCartItems();
        }

        // Hàm xóa tất cả
        function clearCart() {
            localStorage.removeItem('cart');
            displayCartItems();
        }

        // Hàm cập nhật số lượng
        function updateQuantity(productId, newQuantity) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            const item = cart.find(item => item.id === productId);
            
            if (item) {
                item.quantity = newQuantity;
                localStorage.setItem('cart', JSON.stringify(cart));
                displayCartItems();
            }
        }

        // Hàm tính tổng hóa đơn
        function updateTotal() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            document.querySelector('.total-section h4').textContent = `Tổng hóa đơn: ${total.toLocaleString('vi-VN')}₫`;
        }

        // Sự kiện thanh toán
        document.querySelector('.btn-danger[style="width: 150px;"]').addEventListener('click', function() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                alert('Giỏ hàng của bạn đang trống!');
                return;
            }
            alert('Đã gửi đơn hàng thành công!');
            clearCart();
        });
    });
</script>
</body>

</html>